services:
  kokoro:
    image: ghcr.io/remsky/kokoro-fastapi-gpu:latest
    ports:
      - "8880:8880"
    environment:
      - KOKORO_VOICE=af_heart
      - KOKORO_SPEED=1.0
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]
    restart: unless-stopped

  # Uncomment below if GPU is unavailable (shares VRAM with vLLM)
  # kokoro-cpu:
  #   image: ghcr.io/remsky/kokoro-fastapi-cpu:latest
  #   ports:
  #     - "8880:8880"
  #   restart: unless-stopped
